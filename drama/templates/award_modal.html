<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>

<div class="modal fade" id="awardModal" tabindex="-1" role="dialog" aria-labelledby="awardModalTitle" aria-hidden="true">
	<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Give Award</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true"><i class="far fa-times"></i></span>
				</button>
			</div>
			<div id="awardModalBody" class="modal-body">
				<form v-if="loaded" id="sex" class="pt-3 px-3 pb-0">
					<div class="card-columns awards-wrapper">
						<div v-for="(award, index) in awards" :key="index">
							<input type="radio" :id="index" name="award">
							<label class="card" :for="index">
								<i :class="award.icon+' '+award.color"></i><br />
								<span class="d-block pt-2" style="font-weight: bold; font-size: 14px;">[[ award.title ]]</span>
							</label>
						</div>
					</div>
				</form>
				<div v-else class="p-5 text-center">
					<h4>Loading...</h4>
				</div>
			</div>
		 <div class="modal-footer">
			<button type="button" class="btn btn-link text-muted" data-dismiss="modal">Cancel</button>
			<button type="submit" class="btn btn-warning" id="exileUserButton" disabled>Give Award</button>
		</div>
	</div>
</div>
</div>

<style>
	.awards-wrapper input[type="radio"] {
		display: none;
	}

	.awards-wrapper label {
		cursor: pointer;
		padding: 15px;
		text-align: center;
		text-transform: none!important;
	}

	.awards-wrapper label i {
		font-size: 45px;
	}

	.awards-wrapper label:hover {
		background-color: rgba(173, 226, 255, 0.7)!important;
	}

	.awards-wrapper input[type="radio"]:checked+label {
        background-color: rgba(173, 226, 255, 0.9)!important;
    }
</style>

<script>
	new Vue({
		el: "#awardModalBody",
		delimiters: ['[[', ']]'],
		data: {
			loaded: false,
			awards: []
		},
		mounted() {
			fetch('/api/awards')
				.then(response => response.json())
				.then(json => this.awards = json);

			this.loaded = true;
		}
	})
</script>